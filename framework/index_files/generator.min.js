function checkJqueryUI(){"undefined"!=typeof jQuery.ui?do_jqueryui():window.setTimeout(checkJqueryUI,50)}function do_jqueryui(){!function(a){function b(a,b){if(!(a.originalEvent.touches.length>1)){a.preventDefault();var c=a.originalEvent.changedTouches[0],d=document.createEvent("MouseEvents");d.initMouseEvent(b,!0,!0,window,1,c.screenX,c.screenY,c.clientX,c.clientY,!1,!1,!1,!1,0,null),a.target.dispatchEvent(d)}}if(a.support.touch="ontouchend"in document,a.support.touch){var c,d=a.ui.mouse.prototype,e=d._mouseInit,f=d._mouseDestroy;d._touchStart=function(a){var d=this;!c&&d._mouseCapture(a.originalEvent.changedTouches[0])&&(c=!0,d._touchMoved=!1,b(a,"mouseover"),b(a,"mousemove"),b(a,"mousedown"))},d._touchMove=function(a){c&&(this._touchMoved=!0,b(a,"mousemove"))},d._touchEnd=function(a){c&&(b(a,"mouseup"),b(a,"mouseout"),this._touchMoved||b(a,"click"),c=!1)},d._mouseInit=function(){var b=this;b.element.bind({touchstart:a.proxy(b,"_touchStart"),touchmove:a.proxy(b,"_touchMove"),touchend:a.proxy(b,"_touchEnd")}),e.call(b)},d._mouseDestroy=function(){var b=this;b.element.unbind({touchstart:a.proxy(b,"_touchStart"),touchmove:a.proxy(b,"_touchMove"),touchend:a.proxy(b,"_touchEnd")}),f.call(b)}}}(jQuery)}window.setHashLink=0,window.setPopupHash=1,"function"!=typeof Object.assign&&(Object.assign=function(a){"use strict";if(null==a)throw new TypeError("Cannot convert undefined or null to object");a=Object(a);for(var b=1;b<arguments.length;b++){var c=arguments[b];if(null!=c)for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a}),$(document).ready(function(){"use strict";function a(a){var c=$(this);if(c.hasClass("loading"))return a.preventDefault(),a.stopPropagation(),a.stopImmediatePropagation(),!1;var d=c.data("fileInfo");b(d);var e=new Clipboard(".copyme",{text:function(){return d.src}});e.on("success",function(a){$("#copyCode")[0].play(),$(".copyme").text("DONE"),setTimeout(function(){$(".copyme").text("COPY")},2e3)})}function b(a){if(a=a||{},"undefined"!=typeof a.src&&a.src.length?($(".copy-path").attr("value",a.src),~a.type.indexOf("video/")?$(".view-image").empty().css("background-image","").append('<video controls class="wide"><source type="'+a.type+'" src="'+a.src+'"></video>').parent(".image-element").attr("data-type",a.type):$(".view-image").empty().css("background-image","url("+a.src+")")):($(".view-image").css("background-image",""),$(".copy-path").attr("value","")),"undefined"!=typeof a.name&&a.name.length?($(".upl-lib-file-name-val").text(a.name),$(".upl-lib-remove-btn").attr("data-file",a.name)):($(".upl-lib-file-name-val").text(""),$(".upl-lib-remove-btn").attr("data-file","")),"undefined"!=typeof a.type&&a.type.length?$(".upl-lib-file-type-val").text(a.type):$(".upl-lib-file-type-val").text(""),"undefined"==typeof a.size||!a.size.length&&isNaN(parseInt(a.size))?($(".upl-lib-file-size-val").text(""),$(".upl-lib-file-size").hide()):($(".upl-lib-file-size-val").text(B(a.size)),$(".upl-lib-file-size").show()),"undefined"!=typeof a.uploaded&&a.uploaded.length){var b=new Date(a.uploaded);$(".upl-lib-uploaded-val").text(b.toDateString())}else $(".upl-lib-uploaded-val").text("");"undefined"!=typeof a.download_url&&a.download_url.length?$(".upl-lib-download-btn").attr("href",a.download_url):$(".upl-lib-download-btn").attr("href","#"),"undefined"!=typeof a.dimensions&&a.dimensions.length?($(".upl-lib-dimensions-val").text(a.dimensions+" px"),$(".upl-lib-dimensions").show()):($(".upl-lib-dimensions-val").text(""),$(".upl-lib-dimensions").hide())}function c(){$("#svgSymbolEditor, #svgNewSymbolEditor, #svgSymbolPrepared").val(""),M.setValue(""),N.setValue(""),$("#svgNewSymbolPreviewSvg, #svgSymbolPreviewSvg").html(""),setTimeout(function(){v()},15)}function d(a){var b='<svg class="delete"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#generator-close"></use></svg>';return b+='<svg class="delete delete-white"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#generator-close-white"></use></svg>',b+='<svg class="wide" data-slider-action="1" data-slider-id="svg-library-slider">',b+='  <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#'+a+'"></use>',b+="</svg>",a.indexOf("customSymbol")!=-1&&(a="custom"),b+='<p class="smallest align-center symbol-name">'+a.replace(/_/g,"-")+"</p>"}function e(a){var b='<div class="symbol col-1-10 col-tablet-1-4 col-phablet-1-3 col-phone-1-2 -padding-1 padding-bottom-4 relative pointer" data-id="#'+a+'">',e=d(a);b+=e,b+="</div>",b=$(b),b.bind("click",function(a){c();var b=$(this).attr("data-id");if($(a.target).hasClass("delete")||$(a.target).closest(".delete").length){var d=confirm("Are you sure?");d&&($(b).remove(),$(this).remove(),K.update_project_svg($("#customSvgLibrary")[0].outerHTML))}else{var e=$(b)[0].outerHTML;$("#svgSymbolEditor").val(e),M.setValue(e);var f='<svg><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+b+'"></use></svg>';$("#svgSymbolCopy").val(f),e=e.replace(b.replace("#",""),"svgSymbolPreviewSymbol"),$("#svgSymbolPreviewSvg").html(e),M.focus(),$("#saveSymbolChanges").attr("data-editing-id",b)}}),$("#customSvgLibrary_container").append(b)}function f(a,b){var c=g(a,b);if(c){var d=b?"":"New",e=$(c).attr("id").replace("#","");c=c.replace(e,"svg"+d+"SymbolPreviewSymbol"),$("#svg"+d+"SymbolPreviewSvg").html(c),$("#svg"+d+"SymbolPreview").html($("#svg"+d+"SymbolPreview").html())}}function g(a,b){if($(".svgLibraryError").empty(),$("#svgSymbolPrepared").val(""),""==a)return!1;if(a.indexOf("<svg")!=-1&&(a=a.replace("<svg","<symbol").replace("</svg>","</symbol>")),a.indexOf("<symbol")==-1)return $(".svgLibraryError").text("Not found <svg> or <symbol> tag."),!1;var c=$(a).attr("id");if(""==c||void 0==c){new Date;c="symbol_"+Math.random().toString(36).substring(5),a=$(a).attr("id",c),a=a[0].outerHTML}var d=c.split("")[0],e=["0","1","2","3","4","5","6","7","8","9","`","~","!","@","#","$","%","^","&","*","(",")","[","]","{","}","-","+","=","<",">","/","|",".",",","?","'",'"'," "];if(e.indexOf(d)!=-1)return $(".svgLibraryError").text('The ID cannot start from a number or special symbol. Yours starts from "'+d+'".'),!1;var f=$(a).attr("viewBox");if(""!=f&&void 0!=f){var g=[];$(a)[0].attributes.length&&$.each($(a)[0].attributes,function(a,b){"width"!=b.name.toLowerCase()&&"height"!=b.name.toLowerCase()&&"xmlns"!=b.name.toLowerCase()&&g.push(b.name+'="'+b.value+'"')}),g=g.join(" ");var h="<symbol "+g+">"+$(a).html()+"</symbol>";return $("#svgSymbolPrepared").val(h),$(".svgLibraryError").empty(),h}return f=$(a).attr("viewbox"),""==f||void 0==f?($(".svgLibraryError").text('Your symbol must have a "viewBox" attribute'),!1):void 0}function h(){a&&a.destroy();var a=$(".lazy").lazy({visibleOnly:!0,enableThrottle:!1,effect:"fadeIn",appendScroll:window.popupShown?$(".content"):window,afterLoad:function(a){a.removeClass("lazy")}})}function i(a,b,c){var d=!1;if("checkbox"==b&&(a.prop("checked")!==!1&&"0"==c&&(d=!0,a.prop("checked",!1)),a.prop("checked")===!1&&"1"==c&&(d=!0,a.prop("checked","checked"))),"radio"==b){var e=!1;a.each(function(){$(this).prop("checked")!==!1&&(e=$(this).val())}),e!=c&&(d=!0,a.removeAttr("checked"),a.each(function(){$(this).val()==c&&$(this).prop("checked","checked")}))}if("label"==b){var f=a.closest(".label.sel"),g=f.attr("data-name").toLowerCase();"dots"==g&&"navigation"==a.attr("name")&&(g="default"),g!=c&&(d=!0,"none"==c&&"navigation"==a.attr("name")&&(c=""),a.each(function(){$(this).val()==c&&("effect"==a.attr("name")&&(f.removeClass("sel"),$(this).closest(".label").addClass("sel")),"navigation"==a.attr("name")&&$(this).closest(".label").click())}))}return d}function j(){window.dropdownShown&&($("html").removeClass("dropdownShown").removeClassByPrefix("dropdown_"),window.dropdownShown=!1,$(".dropdown.show").addClass("hide").one("webkitTransitionEnd otransitionend msTransitionEnd transitionend",function(){$(this).removeClass("show hide"),I.removeClass("dropdownShown").removeClassByPrefix("dropdown_")}))}function k(a,b){var c="copy_layout_"+a.replace("-","_");return window.slide_app.generator.url[c].replace(window.slide_app.generator.url_id_pattern,b)}function l(a,b,c){var d=c.component_id,e=c.preview_url,f=b.indexOf("example")!=-1?"Example":"Slide",g=$("<input>",{name:"slides[]",type:"checkbox",checked:"checked",val:a}),h=$("<input>",{name:"whiteSlide[]",class:"toggleWhiteSlide",type:"text"}),i=$("<img/>",{src:e}),j="",k=$('<div class="name">'+c.component_label+"</div>"),l=$('<span class="remove" data-action="remove"><svg><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#generator-remove"></use></svg></span>'),m=$('<span class="copy" data-action="copy"><svg><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#generator-duplicate"></use></svg></span>'),n="Slide"==f?$('<span class="whiteSlideToggle" data-action="whiteSlideToggle"><svg><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#generator-whiteSlideToggle"></use></svg></span>'):null,o=$('<span class="edit" data-action="edit"><svg><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#generator-edit"></use></svg></span>'),p=$("<div>").addClass("edit-layer").prepend(o,m,n,l),r=$("<li "+("Slide"==f?'class="can_switch_white"':"")+' data-number="'+a+'" data-cnid="'+b+'" data-component-id="'+d+'"></li>').append(k,g,h,i,j,p);$(".generator").hasClass("whiteSlides")&&(r.addClass("white"),r.find(".toggleWhiteSlide").val(a)),$("#sortable").append(r),q()}function m(){return window.unsavedChanges&&confirm("Are you sure?")||!window.unsavedChanges?(J.removeClass("generator-edit-mode"),window.isEditMode=!1,window.hideSidebarOnBodyClick=1,$("iframe#editor-preview").remove(),$(".preview-box .preview").empty(),$("#generator-html-code-editor").val(""),E.setValue(""),$("#generator-css-code-editor").val(""),F.setValue(""),$("#generator-js-code-editor").val(""),G.setValue(""),$("#code-editor-save-handler").attr("data-cid",""),w(),window.updateScroll=1,window.unsavedChanges=!1,!0):(window.unsavedChanges=!0,!1)}function n(a){J.addClass("generator-edit-mode"),window.hideSidebarOnBodyClick=0,window.isEditMode=!0,window.updateScroll=0;var b=window.slide_app.generator.url.preview_component.replace(window.slide_app.generator.url_project_pattern,window.slide_app.project.id).replace(window.slide_app.generator.url_page_pattern,window.slide_app.page.id).replace(window.slide_app.generator.url_id_pattern,a);window.unsavedChanges=!1,$("#code-editor-save-handler").removeClass("green").addClass("gray disabled"),K.get_component(a,function(b){b.component&&($("#code-editor-save-handler").attr("data-cid",a),b.component.html&&($("#generator-html-code-editor").val(b.component.html),E.setValue(b.component.html)),b.component.css&&($("#generator-css-code-editor").val(b.component.css),F.setValue(b.component.css)),b.component.js&&($("#generator-js-code-editor").val(b.component.js),G.setValue(b.component.js)),w(),window.unsavedChanges=!1,$("#code-editor-save-handler").removeClass("green").addClass("gray disabled"))}),$(".preview-box .preview").html('<iframe class="ignoreBodyClick" src="'+b+'"></iframe>')}function o(a){var b=(parseInt($(window).width()),Math.round($(".preview-box .panel-left").outerWidth())),c=Math.round($(window).width())-b-14,a=!a||a;b>=320&&($(".width-size").text(b).show(),$(".code-wrap").css("opacity",1).css("visibility","visible"),$.cookie("editor-panel-right-width",c)),b<320?($(".splitter").addClass("shadow"),$(".width-size").text(320).show()):$(".splitter").removeClass("shadow"),a&&w(),clearTimeout(window.fadeoutInterval),window.fadeoutInterval=setTimeout(function(){$(".width-size").fadeOut()},2e3)}function p(a){if(a.length){var b=a.attr("src");b=b.split("?",1);var c=b+"?timestamp="+(new Date).getTime();a.attr("src",c)}}function q(){var a=$("#sortable li[data-number]").length<=0?0:$("#sortable li[data-number]").length,b=$(".selectCounter"),a=$(".panels.top .label.sel").length>0?parseFloat(a)+1:a,a=$(".panels.bottom .label.sel").length>0?parseFloat(a)+1:a;return $(".allslides li.added").removeClass("added"),$("#sortable li[data-number]").each(function(a,b){var c=$(b).data("number");$(".allslides").find('li[data-number="'+c+'"]').addClass("added")}),b.find(".number").html(a),setTimeout(function(){a||(b.find(".number").text(0),$('.button[data-popup-id="download"]').removeClass("green").addClass("gray"))},1),a}function r(a,b,c,d){var e=d.component_id,f=$('.label[data-type="'+a+'"][data-num="'+b+'"]'),g=$("<img/>",{src:d.preview_url}),h=$('<span class="remove" data-action="remove"><svg><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#generator-remove"></use></svg></span>'),i=$('<span class="edit" data-action="edit"><svg><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#generator-edit"></use></svg></span>'),j=$("<div></div>").append(g,i,h).addClass("panel-holder").attr("data-number",b).attr("data-type",a).attr("data-cnid",c).attr("data-component-id",e);f.parents(".panels").find(".sel").removeClass("sel").find("input").prop("checked",!1),f.addClass("sel").find("input").prop("checked",!0),$("."+a+"-holder").html(j),q()}function s(a){$('.label[data-type="'+a+'"].sel').removeClass("sel").find("input").prop("checked",!1),$("."+a+"-holder").empty(),q()}function t(a){a="undefined"!=typeof a&&a;var b,c,d,e,f,g,h=!!$('input[name="baseFont"]').val()&&$('input[name="baseFont"]').val(),i=!!$('input[name="titleFont"]').val()&&$('input[name="titleFont"]').val(),j=!!$('input[name="buttonFont"]').val()&&$('input[name="buttonFont"]').val(),k=$('input[name="fontSubset"]').val()?$('input[name="fontSubset"]').val():"latin",l="",m=[],n="100;300;400;500;600;800";h?(m.push(h),h.indexOf(":wght@")>-1?(b=h.split(":wght@")[0].split("+").join(" "),c=h.split(":wght@")[1]):(b=h.split("+").join(" "),c="400"),l=l+'.slides, .slides p { font-family: "'+b+'", sans-serif; font-weight: '+c+"; }",$('.resetValue[data-name="baseFont"]').addClass("visible")):m.push("Inter:wght@"+n),i&&(i.indexOf(":wght@")>-1?(d=i.split(":wght@")[0].split("+").join(" "),e=i.split(":wght@")[1]):(d=i.split("+").join(" "),e="400"),m.push(i),l=l+'.slides h1, .slides h2, .slides h3, .slides h4, .slides h5, .slides h6 { font-family: "'+d+'", sans-serif; font-weight: '+e+"; }",$('.resetValue[data-name="titleFont"]').addClass("visible")),j&&(j.indexOf(":wght@")>-1?(f=j.split(":wght@")[0].split("+").join(" "),g=j.split(":wght@")[1]):(f=j.split("+").join(" "),g="400"),m.push(j),l=l+'.slides .button, .slides .slides-form * { font-family: "'+f+'", sans-serif !important; font-weight: '+g+";}",$('.resetValue[data-name="buttonFont"]').addClass("visible")),k&&$('.resetValue[data-name="fontSubset"]').addClass("visible"),1==a&&(h?(h=h.indexOf(":wght@400")?h.replace(":wght@400",""):h,h=h.indexOf("+")?h.replace("+"," "):h):h="",i?(i=i.indexOf(":wght@400")?i.replace(":wght@400",""):i,i=i.indexOf("+")?i.replace("+"," "):i):i="",j?(j=j.indexOf(":wght@400")?j.replace(":wght@400",""):j,j=j.indexOf("+")?j.replace("+"," "):j):j="",$("#baseFont").val(h).trigger("change.select2"),$("#titleFont").val(i).trigger("change.select2"),$("#buttonFont").val(j).trigger("change.select2"),$("#fontSubset").val(k).trigger("change.select2")),window.slide_app.page.options.styles.title_font=$("#titleFont").val(),window.slide_app.page.options.styles.base_font=$("#baseFont").val(),window.slide_app.page.options.styles.button_font=$("#buttonFont").val(),window.slide_app.page.options.styles.subset=$("#fontSubset").val(),K.update_page(1e3),$("#stylePreview").contents().find("#customstyles, #customfonts").remove(),$("#stylePreview").contents().find("body").append('<link id="customfonts" href="https://fonts.googleapis.com/css2?family='+m.join("&family=").replace(/ /g,"+")+'&display=swap" rel="stylesheet" type="text/css"/><style type="text/css" id="customstyles">'+l+"</style>")}function u(){var a=$("#fontSubset").val(),b=X[a],c=[];$.each(b,function(a,b){c.push(a),b.length>0&&$.each(b,function(b,d){c.push({id:a+":wght@"+d,text:a+":"+d})})}),$("#titleFont").hasClass("select2-hidden-accessible")&&$("#titleFont, #baseFont, #buttonFont").html("").val(null).trigger("change"),$("#titleFont, #baseFont, #buttonFont").select2({width:"100%",data:c,cache:!0,tags:!0,placeholder:"Google Font"}).on("select2:select",function(a){var b=$(this).attr("id"),c=a.params.data.id;$('input[name="'+b+'"]').val(c),t()}).on("select2:opened",function(a){$(this).find(".select2-search__field").attr("placeholder","Filter")}),$("#baseFont").val(window.slide_app.page.options.styles.base_font).trigger("change.select2"),$("#titleFont").val(window.slide_app.page.options.styles.title_font).trigger("change.select2"),$("#buttonFont").val(window.slide_app.page.options.styles.button_font).trigger("change.select2")}function v(){$(".CodeMirror").each(function(a,b){b.CodeMirror.refresh()})}function w(){clearTimeout(H),H=setTimeout(v,250)}function x(a){return{from:a.getCursor(!0),to:a.getCursor(!1)}}function y(a){var b=x(a);a.autoIndentRange(b.from,b.to)}function z(a,b){var c=x(a);a.commentRange(b,c.from,c.to)}function A(b,c){var d=b.files[0],e=$(b),f=e.data("validTypes"),g=e.data("maxSize");if(f.indexOf(d.type)==-1)return alert("Error : Incorrect file type"),void(b.value="");if(d.size>g)return alert("Error : Exceeded size "+B(g)),void(b.value="");var h=$('<li data-slider-action="1" data-slider-id="uploaded-images" class="col-2-12 loading image-element" data-type="'+d.type+'" data-tag="'+d.name+'"><div class="loading-bar"><div class="loading-track"></div></div><div class="preview-image no-preview"></div></li>'),i=new FormData,j={name:d.name,type:d.type,size:d.size,uploaded:null,dimension:null,src:null};i.append("file",d),h.data("fileInfo",j),K.upload_image(i,{beforeSend:function(){window.uploadedImages.prepend(h)},xhr:function(){var a=null;return a=window.ActiveXObject?new window.ActiveXObject("Microsoft.XMLHTTP"):new window.XMLHttpRequest,a.upload.addEventListener("progress",function(a){if(a.lengthComputable){$(window).trigger("updateImages");var b=Math.round(100*a.loaded/a.total);console.log("Uploaded percent",b),h.find(".loading-track").css("transform","scaleX("+(a.loaded/a.total).toFixed(3)+")")}},!1),a},success:function(b){"ok"==b.status&&"undefined"!=typeof b.file?(h.removeClass("loading").find(".loading-bar").remove(),h.find(".preview-image").removeClass("no-preview").css("background-image","url("+b.file.src+")"),h.data("fileInfo",b.file),h.on("click",a),h.attr("data-tag",b.file.name),"function"==typeof c&&c(b.file)):(h.remove(),$('[data-popup-id="ajaxerror"] .custom-error-message').text(b.content).show(),$('[data-popup-id="ajaxerror"] .base-error-message').hide(),window.showPopup("ajaxerror"))},error:function(a){h.remove(),console.log(a),alert("Error")}})}function B(a){var b=["Bytes","KB","MB","GB","TB"];if(0==a)return"0 Byte";var c=parseInt(Math.floor(Math.log(a)/Math.log(1024)));return Math.round(a/Math.pow(1024,c),2)+" "+b[c]}function C(){return!!window.FormData}function D(){var a=document.createElement("INPUT");return a.type="file","files"in a}var E,F,G,H,I=$("html"),J=$("body"),K={request_tokens:{page_update:0},additional_settings_labels:{"simplified-mobile":"simple_mobile","navigation-hashlinks":"nav_anchor","optimize-assets":"optimize","body-scripts":"body_scripts","body-styles":"body_styles"},request:function(a){var b={type:"GET",data:{project:window.slide_app.project.id,page:window.slide_app.page.id},error:function(b){console.log("%cAJAX ERROR:","background: #3d3d3d; color: #ff3d3d",b),"undefined"!=typeof b.responseJSON&&"undefined"!=typeof b.responseJSON.content&&b.responseJSON.content.length?($('[data-popup-id="ajaxerror"] .custom-error-message').text(b.responseJSON.content).show(),$('[data-popup-id="ajaxerror"] .base-error-message').hide()):($('[data-popup-id="ajaxerror"] .custom-error-message').hide(),$('[data-popup-id="ajaxerror"] .base-error-message').show()),window.showPopup("ajaxerror"),"function"==typeof a.afterError&&a.afterError(b)}},c=Object.assign({},b,a);c.data=Object.assign({},b.data,c.data),$.ajax(c)},post:function(a){var b={type:"POST"},c=Object.assign({},b,a);K.request(c)},patch:function(a){var b={data:{_method:"PATCH"}},c=Object.assign({},b,a);c.data=Object.assign({},b.data,c.data),K.post(c)},put:function(a){var b={data:{_method:"PUT"}},c=Object.assign({},b,a);c.data=Object.assign({},b.data,c.data),K.post(c)},delete:function(a){var b={data:{_method:"DELETE"}},c=Object.assign({},b,a);c.data=Object.assign({},b.data,c.data),K.post(c)},head:function(a){var b={data:{_method:"HEAD"}},c=Object.assign({},b,a);c.data=Object.assign({},b.data,c.data),K.post(c)},update_page_request:function(a){var b={url:window.slide_app.generator.url.page_update,data:slide_app.page};"function"==typeof a&&(b.success=a),K.patch(b)},update_page:function(a,b){a=a||550,clearTimeout(K.request_tokens.page_update),K.request_tokens.page_update=setTimeout(function(){K.update_page_request(b)},a)},clear_page:function(){K.patch({url:window.slide_app.generator.url.page_clear})},remove_page:function(a){K.delete({url:window.slide_app.generator.url.page_remove,success:function(b){"function"==typeof a&&a(b)}})},duplicate_page:function(a){K.post({url:window.slide_app.generator.url.page_duplicate,success:function(b){"function"==typeof a&&a(b)}})},add_slide:function(a,b){return!!b&&void K.put({url:window.slide_app.generator.url.slide_add,data:{cnid:b,is_white:$(".generator").hasClass("whiteSlides")?1:0,count:$("#sortable li[data-number]").length+1},success:function(c){l(a,b,c)}})},remove_slide:function(a){return!!a&&void K.delete({url:window.slide_app.generator.url.slide_remove,data:{cid:a}})},duplicate_slide:function(a,b,c){return!!a&&void K.post({url:window.slide_app.generator.url.slide_duplicate,data:{cid:a},success:function(a){"function"==typeof b&&b(a)},afterError:function(a){"function"==typeof c&&c(a)}})},sort_slides:function(a,b){var c=$(this),d=c.sortable("toArray",{attribute:"data-component-id"});K.patch({url:window.slide_app.generator.url.slide_sort,data:{sorted:d}})},add_panel:function(a,b,c){return!!c&&void K.put({url:window.slide_app.generator.url.panel_add,data:{cnid:c},success:function(d){r(a,b,c,d)}})},remove_panel:function(a,b){var c={};b&&(c.cid=b),a&&(c.type=a),K.delete({url:window.slide_app.generator.url.panel_remove,data:c,success:function(b){s(a)}})},get_component:function(a,b){var c={url:window.slide_app.generator.url.slide_get,data:{}};a&&(c.data.cid=a),"function"==typeof b&&(c.success=b),K.head(c)},update_component:function(a,b,c){var d={url:window.slide_app.generator.url.slide_update,data:b};a&&(d.data.cid=a),"function"==typeof c&&(d.success=c),K.patch(d)},slide_switch_white:function(a,b){var c={url:window.slide_app.generator.url.slide_switch_white,data:{}};a&&(c.data.cid=a),"function"==typeof b&&(c.success=b),K.patch(c)},upload_image:function(a,b){a.append("project",window.slide_app.project.id),a.append("page",window.slide_app.page.id);var c={url:window.slide_app.generator.url.image_upload,data:a,cache:!1,contentType:!1,processData:!1,dataType:"json",type:"POST"};"undefined"!=typeof b&&("function"==typeof b.xhr&&(c.xhr=b.xhr),"function"==typeof b.success&&(c.success=b.success),"function"==typeof b.beforeSend&&(c.beforeSend=b.beforeSend),"function"==typeof b.error&&(c.error=b.error)),$.ajax(c)},remove_image:function(a){var c={};a&&(c.filename=a),K.delete({url:window.slide_app.generator.url.image_remove,data:c,success:function(c){b(),$('[data-slider-id="uploaded-images"]').click(),$('.image-element[data-tag="'+a+'"]').remove()}})},update_project_svg:function(a,b){var c={url:window.slide_app.generator.url.project_save_svg_lib,data:{id:window.slide_app.project.id,svg:a}};"function"==typeof b&&(c.success=b),K.patch(c)},add_example:function(a,b){return!!b&&void K.put({url:window.slide_app.generator.url.example_add,data:{cnid:b,is_white:$(".generator").hasClass("whiteSlides")?1:0,count:$("#sortable li[data-number]").length+1},success:function(c){l(a,b,c)}})}};window.uploadedImages=$(".filterImages"),$(".image-element").on("click",a);var L={lineNumbers:!1,mode:"htmlmixed",matchBrackets:!0,matchTags:!0,lineWrapping:!0,gutter:!1,tabSize:2,autoRefresh:!0,scrollbarStyle:"simple",extraKeys:{"Ctrl-Q":function(a){a.foldCode(a.getCursor())}},foldGutter:!1},M=CodeMirror.fromTextArea(document.getElementById("svgSymbolEditor"),L),N=CodeMirror.fromTextArea(document.getElementById("svgNewSymbolEditor"),L);M.on("change",function(a,b){var c=M.getValue();f(c,!0)}),N.on("change",function(a,b){var c=N.getValue();f(c,!1)}),$(".popupTrigger[data-popup-id=svg-library]").on("click",function(a){var b=$("#customSvgLibrary_container");b.find(".symbol").remove();var c=b.find("symbol");c.each(function(){var a=$(this).attr("id");e(a)})}),$("#customSvgLibrary_bgToggle").on("click",function(a){$("#customSvgLibrary_container").hasClass("dark")?$("#customSvgLibrary_container, #svgSymbolPreview, #svgNewSymbolPreview").removeClass("dark").addClass("light"):$("#customSvgLibrary_container, #svgSymbolPreview, #svgNewSymbolPreview").removeClass("light").addClass("dark")}),$("#addSymbol").on("click",function(a){c(),$("#saveSymbolChanges").attr("data-editing-id",!1),$(".add-svg-symbol .hide-if-has-code").show(),$("#generator-svg-upload-input").val("")}),$("#generator-svg-upload-button").on("click",function(){D()&&C()?$("#generator-svg-upload-input").click():alert("Update your browser")}),$("#generator-svg-upload-input").on("change",function(){if(!this.files||!this.files[0])return!1;var a=this;A(this,function(b){var c=new FileReader;c.onload=function(a){if(c.result){var b=!1;$(c.result).each(function(){void 0!=this.tagName&&"svg"==this.tagName.toLowerCase()&&(b=this.outerHTML)}),b?($("#svgNewSymbolEditor").val(b),N.setValue(b),N.focus(),$(".add-svg-symbol .hide-if-has-code").hide()):alert("Your file doesn't contain <svg> tag!")}},c.readAsText(a.files[0])})}),$("#saveSymbolChanges, #saveNewSymbolChanges").on("click",function(a){var b=$("#svgSymbolPrepared").val();if(""==b||void 0==b)alert("Unable to save symbol - you've got some errors in it's code.");else{b=$(b);var f=b.attr("id");if($("#"+f).length){if("#"+f==$("#saveSymbolChanges").attr("data-editing-id"))var g=!0;else var g=confirm('The symbol with the id="'+f+'" already exists and will be replaced with the current symbol. Continue?');if(g){$("#"+f).remove();var h=d(f);$(".symbol[data-id='#"+f+"']").html("").append($(h))}}else e(f);$("#customSvgLibrary").append(b),$("#customSvgLibrary").html($("#customSvgLibrary").html()),K.update_project_svg($("#customSvgLibrary")[0].outerHTML)}c()});var O=new Clipboard("#svgSymbolCopyBtn",{text:function(){var a=$("#svgSymbolCopy").val();return a}});O.on("success",function(a){$("#copyCode")[0].play(),$("#svgSymbolCopyBtn").text("DONE"),setTimeout(function(){$("#svgSymbolCopyBtn").text("COPY")},2e3)}),$(window).on("DOMMouseScroll mousewheel scroll touchmove",function(){if(!window.isEditMode){var a=$('.slide[data-name="slides"]'),b=$(document).scrollTop(),c=a.offset().top,d=a.height(),e=window.windowHeight/2>d?d/2:window.windowHeight/2,f=c<window.windowHeight+b-e&&c>b-d+e;f&&b>110?$("body").addClass("showSwitch"):$("body").removeClass("showSwitch")}}),h(),$(window).on("click resize popupShown isotope-done",function(){h()});var P=String($('.slide[data-name="slides"]').data("version")),Q=$.cookie("version");Q&&P===Q||$(".footer .version").addClass("new"),$('[href="/slides/changelog/"]').click(function(a){$(".footer .version .updates").removeClass("new"),$.cookie("version",P,{expires:365})}),$(".allslides .slideElement .imageSelect").on("click",function(){if($(this).hasClass("unavailable"))window.showPopup("buynow");else{var a=$(this).parents(".slideElement"),b=a.data("number"),c=a.data("cnid");K.add_slide(b,c)}}),$(".allexamples .slideElement .imageSelect").on("click",function(){if($(this).hasClass("unavailable"))window.showPopup("buynow");else{var a,b=$(this).parents(".slideElement"),c=b.data("number"),d=b.data("cnid"),e=b.attr("data-options"),f=!0;void 0!=e&&""!=e&&(f=confirm("If you'll add this example some of your page settings may be changed. Continue?")),f&&(void 0!=e&&""!=e&&(e=JSON.parse(e),e.additional_settings&&(void 0!=e.additional_settings.nav_anchor&&i($("input[type=checkbox][name=navigation-hashlinks]"),"checkbox",e.additional_settings.nav_anchor)&&(a=!0,slide_app.page.options.additional_settings.nav_anchor=e.additional_settings.nav_anchor),e.additional_settings.preloader&&i($("input[type=checkbox][name=preloader]"),"checkbox",e.additional_settings.preloader)&&(a=!0,slide_app.page.options.additional_settings.preloader=e.additional_settings.preloader),e.additional_settings.simple_mobile&&i($("input[type=checkbox][name=simplified-mobile]"),"checkbox",e.additional_settings.simple_mobile)&&(a=!0,slide_app.page.options.additional_settings.simple_mobile=e.additional_settings.simple_mobile),e.additional_settings.svg&&i($("input[type=checkbox][name=svg]"),"checkbox",e.additional_settings.svg)&&(a=!0,slide_app.page.options.additional_settings.svg=e.additional_settings.svg)),e.animation&&(e.animation.animated&&i($("input[type=radio][name=animated]"),"radio",e.animation.animated)&&(a=!0,slide_app.page.options.animation.animated=e.animation.animated),e.animation.effect&&i($("input[type=radio][name=effect]"),"label",e.animation.effect)&&(a=!0,slide_app.page.options.animation.effect=e.animation.effect),e.animation.easing&&i($("input[type=radio][name=easing]"),"radio",e.animation.easing)&&(a=!0,slide_app.page.options.animation.easing=e.animation.easing),e.animation.horizontal&&i($("input[type=radio][name=horizontal]"),"radio",e.animation.horizontal)&&(a=!0,slide_app.page.options.animation.horizontal=e.animation.horizontal),e.animation.smooth_scroll&&i($("input[type=radio][name=smoothScroll]"),"radio",e.animation.smooth_scroll)&&(a=!0,slide_app.page.options.animation.smooth_scroll=e.animation.smooth_scroll),e.animation.speed&&i($("input[type=radio][name=speed]"),"radio",e.animation.speed)&&(a=!0,slide_app.page.options.animation.speed=e.animation.speed)),e.navigation&&(e.navigation.type&&i($("input[type=radio][name=navigation]"),"label",e.navigation.type)&&(a=!0,slide_app.page.options.navigation.type=e.navigation.type),e.navigation.settings&&(e.navigation.settings.position&&i($("input[type=radio][name=navigation-position]"),"radio",e.navigation.settings.position)&&(a=!0,slide_app.page.options.navigation.settings.position=e.navigation.settings.position),e.navigation.settings.size&&i($("input[type=radio][name=navigation-size]"),"radio",e.navigation.settings.size)&&(a=!0,slide_app.page.options.navigation.settings.size=e.navigation.settings.size),e.navigation.settings.stroke&&i($("input[type=radio][name=navigation-stroke]"),"radio",e.navigation.settings.stroke)&&(a=!0,slide_app.page.options.navigation.settings.stroke=e.navigation.settings.stroke),e.navigation.settings.style&&i($("input[type=radio][name=navigation-style]"),"radio",e.navigation.settings.style)&&(a=!0,slide_app.page.options.navigation.settings.style=e.navigation.settings.style),e.navigation.settings.tooltips&&i($("input[type=radio][name=navigation-tooltips]"),"radio",e.navigation.settings.tooltips)&&(a=!0,slide_app.page.options.navigation.settings.tooltips=e.navigation.settings.tooltips))),a&&K.update_page()),K.add_example(c,d))}}),$(".whiteSlideSwitch").click(function(){$(".slides").hasClass("whiteSlides")?$(".slides").removeClass("whiteSlides"):$(".slides").addClass("whiteSlides")}),$(".slide-options.dropdownTrigger[data-dropdown-id]").on("mousedown",function(){var a,b=$(this).data("dropdown-id"),c=$('[data-copy-html="'+b+'"]:visible'),d=c.data("copy-element"),e=b.split("-")[1],f=!1;"slide-white"==d&&(f=!0,d="slide"),a=k(d,e),f&&(a+="?is_white=1"),$.get(a,function(a){var c=$('[data-copy-html="'+b+'"]'),d=new Clipboard('[data-copy-html="'+b+'"]',{text:function(){return a}});d.on("success",function(a){$("#copyCode")[0].play(),c.addClass("copied").html('<i class="material-icons ae-1 fromCenter do">check_circle</i>Copied'),setTimeout(function(){c.removeClass("copied").text("Copy HTML"),j()},2e3)})})}),$(".slides.generator.demo .custom-separate.unavailable, .slides.generator.demo .settings.unavailable, .slides.generator.demo .tabs.pills.unavailable, .customUI.checkbox.unavailable, .buyFullVersion").on("click",function(a){
a.preventDefault(),window.showPopup("buynow")}),$("#button-load-more").on("click",function(){$(".col-custom.slideElement").show(),$(this).remove()}),$('.dropdownTrigger[data-dropdown-id*="example-"]').on("mousedown",function(){var a=$(this).data("dropdown-id"),b=$('[data-copy-html="'+a+'"]'),c=(b.data("copy-element"),b.data("example-id")),d=k("example",c);$.get(d,function(b){var c=$('[data-copy-html="'+a+'"]'),d=new Clipboard('[data-copy-html="'+a+'"]',{text:function(){return b}});d.on("success",function(a){$("#copyCode")[0].play(),c.addClass("copied").html('<i class="material-icons ae-1 fromCenter do">check_circle</i>Copied'),setTimeout(function(){c.removeClass("copied").text("Copy HTML"),j()},2e3)})})}),$(".emptySlides").click(function(){confirm("Are you sure?")&&($("#sortable, .panel-top-holder, .panel-bottom-holder").empty(),$(".panels.top .label.sel").removeClass("sel").find("input").prop("checked",!1),$(".panels.bottom .label.sel").removeClass("sel").find("input").prop("checked",!1),K.clear_page(),q())}),$(".panel-top-holder:empty").on("click",function(){window.changeSlide(3)}),$(".panel-bottom-holder:empty").on("click",function(){window.changeSlide(4)}),$(".hideEditor").on("click",function(){m()}),window.onbeforeunload=function(a){a=a||window.event;var b=m();if(!b)return a&&(a.returnValue="Are you sure?"),"Are you sure?"};var R=$.cookie("editor-panel-right-width");R&&$(".panel-right").css("width",R+"px"),$(".panel-right").resizable({handleSelector:".splitter",resizeWidthFrom:"left",resizeHeight:!1,onDrag:function(a,b,c,d){var e=(parseInt($(window).width()),$(".preview-box .panel-left").outerWidth()),c=Math.round($(window).width()-e-14);$(".panel-right .top-panel").width();$(".panel-right").width(c),o(!1)},onDragEnd:function(){o()}});$(window).on("resize resizeEnd",function(){window.isEditMode&&o()});var S=500;$(".splitter").dblclick(function(){$(".panel-right").outerWidth()<$(window).width()/2?$(".panel-right").animate({width:Math.round($(window).width())-320-14},{duration:S,queue:!1}):$(".panel-right").addClass("compact-editor").animate({width:250},{duration:S,queue:!1}),setTimeout(function(){o()},S)}),$(".splitter-horizontal").dblclick(function(){$(".code-wrap-css").height()<$(window).height()/3?($(".code-wrap-css").animate({height:$(window).height()-280},{duration:S,queue:!1}),$(".code-wrap-js").animate({height:"0%"},{duration:S,queue:!1}),$(".code-wrap-html").animate({height:"0%"},{duration:S,queue:!1})):$(".code-wrap-css").animate({height:"0%"},{duration:S})}),$(".splitter-horizontal-2").dblclick(function(){$(".code-wrap-js").height()<$(window).height()/3?($(".code-wrap-css").animate({height:"0%"},{duration:S,queue:!1}),$(".code-wrap-js").animate({height:"100%"},{duration:S,queue:!1}),$(".code-wrap-html").animate({height:"0%"},{duration:S,queue:!1})):$(".code-wrap-js").animate({height:"0%"},{duration:S})}),$(".panel-title").dblclick(function(){$(".code-wrap-html").height()<$(window).height()/3?($(".code-wrap-html").animate({height:"100%"},{duration:S,queue:!1}),$(".code-wrap-js").animate({height:"0%"},{duration:S,queue:!1}),$(".code-wrap-css").animate({height:"0%"},{duration:S,queue:!1})):$(".code-wrap-html").animate({height:"0%"},{duration:S})});var T=$.cookie("editor-panel-bottom-height");T&&$(".panel-bottom").css("height",T+"px"),$(".panel-bottom").resizable({handleSelector:".splitter-horizontal",resizeWidth:!1,resizeHeightFrom:"top",onDrag:function(a,b,c,d){$.cookie("editor-panel-bottom-height",d),w()}});var U=$.cookie("editor-panel-bottom-2-height");U&&$(".panel-bottom-2").css("height",U+"px"),$(".panel-bottom-2").resizable({handleSelector:".splitter-horizontal-2",resizeWidth:!1,resizeHeightFrom:"top",onDrag:function(a,b,c,d){$.cookie("editor-panel-bottom-2-height",d),w()}});var V=$.cookie("nightMode");if("On"==V&&($(".nightMode span").html('<i class="material-icons">toggle_on</i>'),$("body").addClass("night")),$(".nightMode").on("click",function(){$("body").toggleClass("night"),$(this).find("span").html($("body").hasClass("night")?'<i class="material-icons">toggle_on</i>':'<i class="material-icons">toggle_off</i>'),$.cookie("nightMode",$("body").hasClass("night")?"On":"Off",{expires:365,path:"/slides/"})}),$("body").on("click","#sortable li > .edit-layer span",function(){var a=$(this).data("action"),b=$(this).closest("li"),c=b.data("number"),d=b.hasClass("white"),e=b.data("componentId");if("copy"===a){K.duplicate_slide(e,function(a){f.attr("data-component-id",a.component_id)},function(a){f.remove()});var f=b.clone();f.attr("data-component-id",""),f.addClass("bounceFromTop").insertAfter(b),$("#sortable li.bounceFromTop").one("webkitAnimationEnd oanimationend msAnimationEnd animationend",function(){$(this).removeClass("bounceFromTop"),q()})}else"remove"===a?confirm("Are you sure?")&&b.addClass("bounceOutRight").one("webkitAnimationEnd oanimationend msAnimationEnd animationend",function(){K.remove_slide(e),$(this).remove(),q()}):"whiteSlideToggle"===a?K.slide_switch_white(e,function(a){d?b.removeClass("white").find(".toggleWhiteSlide").val(""):b.addClass("white").find(".toggleWhiteSlide").val(c),p(b.find("img"))}):"edit"===a&&n(e)}).on("mousedown","#sortable li > .edit-layer span",function(){$(this).closest("li").addClass("noActive")}).on("mouseup","#sortable li > .edit-layer span",function(){$(this).closest("li").removeClass("noActive")}),$(".controller[data-slider-id=blocksSlider] li").click(function(){var a=$(this).text();$("a[data-dropdown-id=blocksChangeTrigger] span").text(a),$("nav.side ul li:eq(0)").attr("data-title",a),window.location.hash=$(this).attr("data-hash")}),window.location.hash.indexOf("examples")>-1&&$(".controller[data-slider-id=blocksSlider] li[data-hash=examples]").length&&$(".controller[data-slider-id=blocksSlider] li[data-hash=examples]").click(),window.isMobile?($("#sortable").sortable({placeholder:"placeholder",axis:!1}).on("sortstop",K.sort_slides),$(".selectCounter").click(function(){$(window).scrollTop(0)})):$("#sortable").sortable({placeholder:"placeholder",axis:"y"}).on("sortstop",K.sort_slides),$(".slides.generator.paid").length>0){var W=$(".filterSlides").isotope({itemSelector:".slideElement",hiddenStyle:{opacity:0,transform:"scale(0.9)"}});W.isotope("on","layoutComplete",function(){$(".slideElement").each(function(){$(this).css("width",$(this).width())})}),W.on("resize",function(){$(".slideElement").css("width","")}),$("[data-filter]").click(function(){var a=$(this),b=a.data("filter"),c=W.find("[data-tag*='"+b+"']");$("[data-filter].selected").removeClass("selected"),a.addClass("selected"),$("#filter").val(""),"*"===b?W.isotope({filter:"*"}):W.isotope({filter:c})}),$("#filter").on("keyup",function(){if($(this).data("keyword",$(this).val()),$(this).val()){var a=$(this).val().toLowerCase(),b=W.find("[data-tag*='"+a+"']");W.isotope({filter:b}),W.attr("data-keyword",$(this).val()),$("[data-filter].selected").removeClass("selected"),$('[data-filter="'+a+'"]').addClass("selected")}else W.isotope({filter:"*"}),$('[data-filter="*"]').addClass("selected")}).on("keydown",function(a){if(13===a.which)return a.preventDefault(),!1}),W.on("layoutComplete arrangeComplete",function(a,b){$(window).trigger("isotope-done"),0===b.length?W.addClass("empty"):W.removeClass("empty")})}$("body").on("mouseup",".animation .navStyles",function(){$(this).hasClass("sel")||($(this).parents(".animation").find("input").prop("checked",!1),$(this).parents(".animation").find(".label.sel").removeClass("sel"),$(this).find("input").prop("checked",!0),$(this).addClass("sel"),window.slide_app.page.options.navigation.type=$(this).find("input").val(),K.update_page())}),$("body").on("mouseover",".animation .label",function(){var a=$(this).find("img.gif"),b=a.attr("src");a.attr("src",b)}),$("body").on("mouseup",".animation .label",function(){$(this).children("div").hasClass("unavailable")?window.showPopup("buynow"):$(this).hasClass("sel")||($(this).parents(".animation").find("input").prop("checked",!1),$(this).parents(".animation").find(".label.sel").removeClass("sel"),$(this).find("input").prop("checked",!0),$(this).addClass("sel"))}),$("#effectControls .effectControls").click(function(){$("#effectControls").removeClassByPrefix("effect-");var a=$("#effectControls input[name='effect']:checked").val();$("#effectControls, html").removeClassByPrefix("effect-").addClass("effect-"+a),window.slide_app.page.options.animation.effect=a,K.update_page(1e3)}),$('#effectControls div[class$="Settings"] input[type="radio"]').on("change",function(){var a=this.name.toSnakeCase();"undefined"!=typeof window.slide_app.page.options.animation[a]&&(window.slide_app.page.options.animation[a]=this.value,K.update_page(1e3))}),$('input[type="radio"][name^="panel-top-"]').on("change",function(){var a=this.name.replace("panel-top-","");"undefined"!=typeof window.slide_app.page.options.panel_top_settings[a]&&(window.slide_app.page.options.panel_top_settings[a]=this.value,K.update_page(1e3))}),$('input[type="radio"][name^="panel-bottom-"]').on("change",function(){var a=this.name.replace("panel-bottom-","");"undefined"!=typeof window.slide_app.page.options.panel_bottom_settings[a]&&(window.slide_app.page.options.panel_bottom_settings[a]=this.value,K.update_page(1e3))}),$("#navCustomize input").change(function(){$("#navCustomize").removeAttr("class");var a="";$("#navCustomize input").each(function(b,c){$(c).is(":checked")&&$(c).attr("value")&&(a=a+" "+$(c).attr("value"))}),$("#navCustomize").addClass(a)}),$("body").on("mouseup",'[name="panel-top-hideOnScroll"][value="yes"]',function(){I.hasClass("scroll")&&$('[name="panel-top-position"][value="fixed"]').click()}),$("body").on("click",".navStyles .label",function(){$(this).children("div").hasClass("unavailable")?window.showPopup("buynow"):$(this).hasClass("sel")||($(this).parents(".navStyles").find("input").prop("checked",!1),$(this).parents(".navStyles").find(".label.sel").removeClass("sel"),$(this).find("input").prop("checked",!0).change(),$(this).addClass("sel"),window.slide_app.page.options.navigation.type=$(this).find("input").val(),K.update_page())}),$('#navCustomize input[type="radio"][name^="navigation-"]').on("change",function(){var a=this.name.replace("navigation-","");"undefined"!=typeof window.slide_app.page.options.navigation.settings[a]&&(window.slide_app.page.options.navigation.settings[a]=this.value,K.update_page(1e3))}),$("#styleCustomize ul.tabs li").on("click",function(){window.slide_app.page.options.styles.type=$(this).text().toLowerCase(),K.update_page(1e3);var a=$(".style-preset-toggle .label.sel");a.removeClass("sel"),a.trigger("click")}),$('#additionalSettingsControll input[type="checkbox"]').on("change",function(){var a=this.name,b="undefined"!=typeof K.additional_settings_labels[a]?K.additional_settings_labels[a]:"",c=$(this).is(":checked")?1:0;"undefined"==typeof window.slide_app.page.options.additional_settings[a]&&b.length&&(a=b),"undefined"!=typeof window.slide_app.page.options.additional_settings[a]&&(window.slide_app.page.options.additional_settings[a]=c,K.update_page(1e3))}),$("body").on("click",".panels .label .imageSelect",function(){if($(this).hasClass("unavailable"))window.showPopup("buynow");else{var a=$(this).parents(".label"),b=a.data("type"),c=a.data("num"),d=a.data("cnid");a.hasClass("sel")?K.remove_panel(b):K.add_panel(b,c,d)}}),$("body").on("click",".panel-top-holder .panel-holder span, .panel-bottom-holder .panel-holder span",function(){var a=$(this).data("action"),b=$(this).parent(".panel-holder"),c=(b.data("number"),b.data("type"),b.data("componentId"));"remove"===a?confirm("Are you sure?")&&b.addClass("bounceOutRight").one("webkitAnimationEnd oanimationend msAnimationEnd animationend",function(){var a=$(this).data("type"),b=$(this).data("componentId");K.remove_panel(a,b)}):"edit"===a&&n(c)}),$("a[href^='#'][target!='_blank']").click(function(){if(location.pathname.replace(/^\//,"")===this.pathname.replace(/^\//,"")&&location.hostname===this.hostname){var a=$(this.hash);return a.length&&$("html, body").stop().clearQueue().animate({scrollTop:a.position().top},300),!1}}),$(".generator img").on("dragstart",function(a){a.preventDefault()}),$(".submitPreview").on("click",function(){$("#generator").submit()}),$(".submitDownload").on("click",function(){$("#generator").append('<input name="download" value="true" class="removeMe"/>').submit(),$("#generator .removeMe").remove()}),$(".updates").length>0&&$("li").hover(function(){$(this).children("dt").hasClass("f")?($("dt:not(.f)").parent().addClass("obscure"),$("dt.f").parent().addClass("highlight")):$(this).children("dt").hasClass("e")?($("dt:not(.e)").parent().addClass("obscure"),$("dt.e").parent().addClass("highlight")):$(this).children("dt").hasClass("n")?($("dt:not(.n)").parent().addClass("obscure"),$("dt.n").parent().addClass("highlight")):$(this).children("dt").hasClass("r")&&($("dt:not(.r)").parent().addClass("obscure"),$("dt.r").parent().addClass("highlight"))},function(){$(".highlight").removeClass("highlight"),$(".obscure").removeClass("obscure"),$(".pop").removeClass("pop")}),$(document).on("click",".style-preset-toggle .label:not(.sel)",function(){if($(this).children("div").hasClass("unavailable"))window.showPopup("buynow");else{$(".style-preset-toggle .label").removeClass("sel"),$(this).addClass("sel");var a=$(this).attr("data-baseFont")?$(this).attr("data-baseFont"):"",b=$(this).attr("data-titleFont")?$(this).attr("data-titleFont"):"",c=$(this).attr("data-buttonFont")?$(this).attr("data-buttonFont"):"",d=$(this).attr("data-fontSubset")?$(this).attr("data-fontSubset"):"latin";$('input[name="baseFont"]').attr("value",a.split("+").join(" ")),$('input[name="titleFont"]').attr("value",b.split("+").join(" ")),$('input[name="buttonFont"]').attr("value",c.split("+").join(" ")),$('input[name="fontSubset"]').attr("value",d.split("+").join(" ")),t(!0),window.slide_app.page.options.styles.title=$(this).attr("data-name"),K.update_page(1e3)}}),$(document).on("click",".tabs[data-slider-id=styles] li.tab-custom",function(){u()}),$(document).on("keypress","form",function(a){return 13!=a.keyCode}),$(".resetValue").on("click",function(){var a=$(this).data("name");$('input[name="'+a+'"]').val(""),t(!0),$(this).removeClass("visible")});var X=window.googleFonts,Y=[];$.each(X,function(a,b){Y.push(a)}),$("#fontSubset").select2({width:"100%",data:Y,cache:!0,tags:!0,placeholder:"Language"}).on("select2:select",function(a){var b=$(this).attr("id"),c=a.params.data.text;$('input[name="'+b+'"]').val(c),u(),t()}).on("select2:opened",function(a){$(this).find(".select2-search__field").attr("placeholder","Filter")}),$("#fontSubset").val(window.slide_app.page.options.styles.subset).trigger("change.select2"),u(),window.onload=function(){if("string"==typeof window.slide_app.page.options.styles.title&&"Default"!=window.slide_app.page.options.styles.title)var a=setInterval(function(){$("#stylePreview").hasClass("lazy")||($('input[name="baseFont"]').attr("value",window.slide_app.page.options.styles.base_font),$('input[name="titleFont"]').attr("value",window.slide_app.page.options.styles.title_font),$('input[name="buttonFont"]').attr("value",window.slide_app.page.options.styles.button_font),$('input[name="fontSubset"]').attr("value",window.slide_app.page.options.styles.subset),t(),clearInterval(a))},100)},$("#pagepicture").on("change",function(){if(!this.files||!this.files[0])return!1;var a=this;A(this,function(b){var c=new FileReader;c.onload=function(a){console.log(a.target.result),$(".social-image").attr("style","background-image:url("+a.target.result+")")},c.readAsDataURL(a.files[0]),window.slide_app.page.image=b.src,K.update_page(1e3)})}),$("#page-main-options").on("submit",function(a){a.stopPropagation(),a.stopImmediatePropagation(),a.preventDefault();var b=$(this),c=b.find('[name="title"]').val(),d=b.find('[name="name"]').val(),e=b.find('[name="file_name"]'),f=b.find('[name="description"]').val(),g=b.find('[name="enabled"]').is(":checked")?1:0,h=b.find('[name="header_includes"]').val(),i=b.find('[name="footer_includes"]').val();c&&(window.slide_app.page.title=c),d&&(window.slide_app.page.name=d),window.slide_app.page.file_name=e.val(),window.slide_app.page.description=f,window.slide_app.page.is_enabled=g,window.slide_app.page.header_includes=h,window.slide_app.page.footer_includes=i,$(".popup.internal.visible").removeClass("saved saving").addClass("saving"),setTimeout(function(){$(".popup.internal.visible").removeClass("saving").addClass("saved")},2e3);var j=(new Date).getTime();return K.update_page(500,function(a){"undefined"!=typeof a.file_name&&(e.val(a.file_name),window.slide_app.page.file_name=a.file_name),"undefined"!=typeof a.local_url&&$(".page-local-url").text(a.local_url),$(".page-name").text(d);var b=(new Date).getTime()-j;b>=2e3||2e3-b<200?$(".popup.internal.visible").removeClass("saving").addClass("saved"):setTimeout(function(){$(".popup.internal.visible").removeClass("saving").addClass("saved")},2e3-b)}),!1}),E=CodeMirror.fromTextArea(document.getElementById("generator-html-code-editor"),{lineNumbers:!0,mode:"htmlmixed",matchBrackets:!0,matchTags:!0,lineWrapping:!0,gutter:!0,tabSize:2,autoRefresh:!0,scrollbarStyle:"simple",extraKeys:{"Ctrl-Q":function(a){a.foldCode(a.getCursor())},"Ctrl-Space":"autocomplete"},foldGutter:!0,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter"]}),G=CodeMirror.fromTextArea(document.getElementById("generator-js-code-editor"),{lineNumbers:!0,mode:"javascript",matchBrackets:!0,lineWrapping:!0,tabSize:2,autoRefresh:!0,scrollbarStyle:"simple",extraKeys:{"Ctrl-Q":function(a){a.foldCode(a.getCursor())},"Ctrl-Space":"autocomplete"},foldGutter:!0,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter"]}),F=CodeMirror.fromTextArea(document.getElementById("generator-css-code-editor"),{lineNumbers:!0,mode:"css",matchBrackets:!0,lineWrapping:!0,tabSize:2,autoRefresh:!0,scrollbarStyle:"simple",extraKeys:{"Ctrl-Q":function(a){a.foldCode(a.getCursor())},"Ctrl-Space":"autocomplete"},foldGutter:!0,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter"]}),$(window).on("resize",function(){w()}),E.on("change",function(a,b){window.unsavedChanges=!0,$("#code-editor-save-handler").removeClass("gray disabled").addClass("green")}),E.on("keyup",function(a,b){a.state.completionActive||!(b.keyCode>64&&b.keyCode<91||188==b.keyCode||191==b.keyCode||111==b.keyCode)||(b.ctrlKey||b.metaKey)&&b.shiftKey&&70==b.which||(b.ctrlKey||b.metaKey)&&(191==b.which||111==b.which)||(b.ctrlKey||b.metaKey)&&(83==b.which||67==b.which||86==b.which||90==b.which)||CodeMirror.commands.autocomplete(a,null,{completeSingle:!1}),"object"!=typeof a.state.completionActive||!b.ctrlKey&&!b.metaKey||83!=b.which&&67!=b.which&&86!=b.which&&90!=b.which||a.state.completionActive.close()}),F.on("change",function(a,b){window.unsavedChanges=!0,$("#code-editor-save-handler").removeClass("gray disabled").addClass("green")}),F.on("keyup",function(a,b){!a.state.completionActive&&b.keyCode>64&&b.keyCode<91&&(!b.ctrlKey&&!b.metaKey||!b.shiftKey||70!=b.which)&&(!b.ctrlKey&&!b.metaKey||191!=b.which&&111!=b.which)&&(!b.ctrlKey&&!b.metaKey||83!=b.which&&67!=b.which&&86!=b.which&&90!=b.which)&&CodeMirror.commands.autocomplete(a,null,{completeSingle:!1}),"object"!=typeof a.state.completionActive||!b.ctrlKey&&!b.metaKey||83!=b.which&&67!=b.which&&86!=b.which&&90!=b.which||a.state.completionActive.close()}),G.on("change",function(a,b){window.unsavedChanges=!0,$("#code-editor-save-handler").removeClass("gray disabled").addClass("green")}),G.on("keyup",function(a,b){!a.state.completionActive&&b.keyCode>64&&b.keyCode<91&&(!b.ctrlKey&&!b.metaKey||!b.shiftKey||70!=b.which)&&(!b.ctrlKey&&!b.metaKey||191!=b.which&&111!=b.which)&&(!b.ctrlKey&&!b.metaKey||83!=b.which&&67!=b.which&&86!=b.which&&90!=b.which)&&CodeMirror.commands.autocomplete(a,null,{completeSingle:!1}),"object"!=typeof a.state.completionActive||!b.ctrlKey&&!b.metaKey||83!=b.which&&67!=b.which&&86!=b.which&&90!=b.which||a.state.completionActive.close()}),$("#code-editor-save-handler").on("click",function(a){a.preventDefault(),a.stopPropagation(),a.stopImmediatePropagation();var b=$(this).attr("data-cid");if("undefined"!=typeof b&&b.length&&window.unsavedChanges){var c=F.getValue(),d=(c.match(/{/g)||[]).length,e=(c.match(/}/g)||[]).length,f=!0;d>e&&(f=confirm('Seems like you have an error in your CSS code (unclosed "}" bracket). Save anyway?')),d<e&&(f=confirm('Seems like you have an error in your CSS code (number of closing "}" brackets more than opened). Save anyway?')),f&&K.update_component(b,{html:E.getValue(),css:c,js:G.getValue()},function(a){var c=$(".preview-box .preview iframe");if(c.length&&(c[0].contentDocument.location.reload(!0),p($('.sidebar [data-component-id="'+b+'"] img')),"undefined"!=typeof a.can_switch_white)){var d=$('.sidebar [data-component-id="'+b+'"]');a.can_switch_white&&!d.hasClass("can_switch_white")?d.addClass("can_switch_white"):d.removeClass("can_switch_white")}window.unsavedChanges=!1,$("#code-editor-save-handler").removeClass("green").addClass("gray disabled")})}}),$(document).keydown(function(a){if((a.ctrlKey||a.metaKey)&&a.shiftKey&&70==a.which)return a.preventDefault(),window.isEditMode&&1==E.hasFocus()&&y(E),window.isEditMode&&1==F.hasFocus()&&y(F),window.isEditMode&&1==G.hasFocus()&&y(G),!1}),$(document).keydown(function(a){if((a.ctrlKey||a.metaKey)&&(191==a.which||111==a.which)){a.preventDefault();var b=!0;return a.altKey&&(b=!1),window.isEditMode&&1==E.hasFocus()&&z(E,b),window.isEditMode&&1==F.hasFocus()&&z(F,b),window.isEditMode&&1==G.hasFocus()&&z(G,b),!1}}),$(document).keydown(function(a){if((a.ctrlKey||a.metaKey)&&83==a.which)return a.preventDefault(),window.isEditMode&&window.unsavedChanges?$("#code-editor-save-handler").click():$(".preview-box .preview iframe").attr("src",$(".preview-box .preview iframe").attr("src")),!1}),$(document).keydown(function(a){jQuery.inArray("shortcuts",window.popupShown)!==-1&&(a.preventDefault(),(a.ctrlKey||a.metaKey)&&$(".keyboard-shortcut span.cmd-ctrl").addClass("keydown"),a.shiftKey&&$(".keyboard-shortcut span.shift").addClass("keydown"),a.altKey&&$(".keyboard-shortcut span.alt").addClass("keydown"),$(".keyboard-shortcut span.k-"+a.which).length>0&&$(".keyboard-shortcut span.k-"+a.which).addClass("keydown"))}).keyup(function(){$(".keyboard-shortcut span").removeClass("keydown")}),$("#duplicate-page-btn").on("click",function(a){return a.preventDefault(),a.stopPropagation(),a.stopImmediatePropagation(),K.duplicate_page(function(a){"ok"==a.status?a.link&&(window.location.href=a.link):($("body").trigger("click"),$('[data-popup-id="ajaxerror"] .custom-error-message').text(a.content).show(),$('[data-popup-id="ajaxerror"] .base-error-message').hide(),window.showPopup("ajaxerror"))}),!1}),$("#delete-page-btn").on("click",function(a){return a.preventDefault(),a.stopPropagation(),a.stopImmediatePropagation(),confirm("Are you sure?")&&K.remove_page(function(a){"ok"==a.status&&a.link&&(window.location.href=a.link)}),!1}),$("#generator-upload-button").on("click",function(){$("#generator-upload-input").val(""),D()&&C()?$("#generator-upload-input").click():alert("Update your browser")}),$("#generator-upload-input").on("change",function(){A(this)}),$(".upl-lib-remove-btn").on("click",function(){var a=$(this),b=a.attr("data-file");b&&b.length&&K.remove_image(b)});var Z=$("#download-page-link"),_=Z.attr("href");Z.on("click",function(a){if($(".js-has-downloads").length){var b=parseInt($(".js-has-downloads:eq(0)").text());b>0?(b--,$(".js-has-downloads").text(b)):a.preventDefault()}}),$("#is-full-package").on("change",function(a){var b=_;$(this).is(":checked")||(b+="?full_package=1"),Z.attr("href",b)})}),String.prototype.toSnakeCase=function(){var a=this.match(/([A-Z])/g);if(!a)return this;for(var b=this.toString(),c=0,d=a.length;c<d;c++)b=b.replace(new RegExp(a[c]),"_"+a[c].toLowerCase());return"_"===b.slice(0,1)&&(b=b.slice(1)),b},checkJqueryUI();